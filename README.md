# 카페 게시물 조회수 예측 및 제작 지원 서비스

## 📌 프로젝트 개요

* **주제**: 카페(커뮤니티) 데이터 기반 **게시물 조회수 예측** 및 **홍보 가이드 자동 생성**
* **목적**: 크롤링한 게시물의 제목·본문·메타정보로 조회수 구간/기대값을 예측하고, 결과를 바탕으로 **게시물 작성 가이드**를 제공
* **역할**: 팀 부리더(Tech Lead) — **기획 → 데이터 파이프라인 → 특성 설계 → 모델링/성능 개선 → LLM 연동 → 서비스화** 전 과정 주도(비전공자 팀 구성 관리)
* **모델/아키텍처**: LightGBM 분류기(4-클래스 비즈니스 구간), LLM API 후처리(GPT 기반), FastText 임베딩+PCA, Streamlit 데모 서비스
* **성과**: 불균형 데이터 환경에서 **R² ≈ 0.77**(기대 조회수 관점) 달성, LLM 기반 가이드 기능 결합으로 **실사용 워크플로우 검증**

---

## 📌 문제 정의 및 도전 과제

* **데이터 노이즈·비정형성**: 특수문자/광고 문구/이모티콘/URL 등으로 토큰 품질 저하
* **클래스 불균형**: 저조회 포스트가 다수, 고조회는 희소(극단 꼬리)
* **브랜드/상품 맥락 누락**: 단순 n-gram만으론 브랜드명/제품 카테고리 누락
* **채널 이질성·시간성**: 카페별 성향/등급, 요일·시간대 영향 반영 필요

---

## 📌 모델 설계 및 구현

### 1) 텍스트 전처리 & 키워드 신뢰도 강화

* **정규화 규칙**: 전화번호/URL/이메일/가격/퍼센트/날짜·시간/해시태그/멘션/이모지 → 플레이스홀더(`<URL>`, `<PRICE>` 등)로 치환
* **형태소 기반 필터링**: MeCab 품사로 명사군 우선 유지, 조사·어미·기호 제거 → 고신뢰 토큰 집합 확보
* **2단계 키워드 추출**: SoyNLP(MaxScoreTokenizer)로 단어 스코어링 → 불용/잡음 제거 후 **TF‑IDF**로 고조회수 코퍼스 핵심 키워드 추출
* **라벨별 키워드 사전**: 제품 라별 키워드 사전 구축, 본문/제목과 매칭해 **`isin_keyword` 신호(포함=1, 미포함=-1)** 생성
* **브랜드 보강**: LLM 기반 **브랜드 추출** + **브랜드 텍스트 유사도** 비교해 제목 토큰 보정

### 2) LLM 기반 맥락 추출 & 가이드 생성

* **추출 태스크**: 제목·본문 요약 토큰을 입력으로 **상품 라벨, 게시물 유형, 대표 브랜드(brand)** 를 **JSON 스키마**로 출력 → 일관성 확보
* **가이드 생성 태스크**: 카페 톤(이모티콘 비율/문체)·유형별 섹션 규칙을 반영해 **제목/본문 예시**를 JSON으로 생성(운영 시 바로 렌더링)

### 3) 특성 설계(Feature Engineering)

* **카테고리 임베딩**: **채널명 / 상품 라벨 / 게시물 유형** 임베딩을 조회해 결합
* **브랜드 임베딩**: FastText에서 **브랜드 토큰 벡터** 추출 → **PCA 축약** 후 결합
* **수치형**: 제목 길이, 등급 평균 성과, 채널 평균 성과 → **표준 스케일링**
* **이진/등급 신호**: `isin_keyword`, **등급 수치(A/S/S+/SS+/U → 1/2/3/6/7)**
* **시간 특성**: 시간/요일에 대해 **사인·코사인 순환 인코딩**

### 4) 학습/예측 로직

* **모델**: LightGBM 예측

---

## 📌 데이터 처리 파이프라인(요약)

1. **수집**: 카페/커뮤니티 게시물 크롤링(제목·본문·메타)
2. **정제**: 규칙 기반 노이즈 치환 → 형태소 필터링
3. **키워드 & 라벨링**: TF‑IDF 핵심어, p\_label별 사전 매칭, LLM로 p\_label/t\_label/brand 추출
4. **피처화**: 카테고리/브랜드 임베딩 + 수치/이진/시간 특성 결합
5. **학습/검증**: LightGBM 예측
6. **서빙**: Streamlit UI에서 입력값 → 예측/가이드 즉시 제공

---

## 📌 서비스/UX 시나리오

* 사용자가 **채널·게시물 유형·제목/본문·게시 시간**을 입력 →

  * 모델: **예측 클래스/확률/기대 조회수** 반환
  * LLM: **브랜드/톤 반영 가이드**(제목/본문 예시 JSON) 생성
  * 보조 기능: **채널별·요일별 최적 조합** 추천(동점 시 주말 선호 규칙 등)

---

## 📌 학습 과정 및 결과

* **셋업**: Train/Valid 분리, 전처리 일체형 파이프라인 저장
* **지표**: 기대 조회수 관점 **R² ≈ 0.77**, 

---

## 📌 기여 및 역할

* **엔드투엔드 오너십**: 데이터 수집·정제 → 특성 설계 → 모델 학습 → LLM 연동 → 데모 서비스까지 **전 과정 주도**
* **프롬프트 엔지니어링**: JSON 스키마 강제, 금지 규칙·톤 가이드 명시로 **출력 일관성** 확보
* **운영 안정성 개선**: 신규 채널/라벨/브랜드에 대비해 **안전 접근(get/기본 벡터)** 설계(배포 버전 반영)
* **팀 리딩**: 비전공자 팀원 대상 업무 분해·코드 리뷰·품질 기준 제정으로 **완료 품질** 달성

---

## 📌 사용 기술 및 도구

* **언어/플랫폼**: Python, (데모) Streamlit
* **NLP**: MeCab, SoyNLP(MaxScoreTokenizer), 정규식 전처리
* **벡터/임베딩**: FastText(ko) 로딩, PCA 축약
* **ML**: LightGBM, Scikit‑Learn(Scaler/PCA/파이프라인)
* **LLM**: GPT 계열 API(브랜드/라벨 추출, 가이드 생성), JSON 후처리

---

## 📌 결론 및 확장

* **결론**: 키워드·브랜드·카테고리·시간·채널 신호를 통합한 파이프라인으로 **실사용 예측력** 확보, LLM 가이드 결합으로 **액션 가능한 인사이트** 제공
* **확장**: 배치 추론 최적화(대량 예측), 캘리브레이션/불확실성 기반 정책, 채널·브랜드 임베딩의 **OOV 안전화/도메인 어댑테이션**, 프론트(Web) 연동 고도화
